/* ==========================================================================
   Explore.module.scss — Infinite Marquee + Ken Burns (no url() in CSS)
   - Endless side-by-side scroll of cards
   - Pause on hover; reduced-motion → manual horizontal scroll
   - Cards use --bg-image supplied from JSX
   ========================================================================== */

:root {
  --ex-card-radius: var(--radius-xl, 18px);
  --ex-gap: var(--space-6, 1.5rem);
  --ex-pad: var(--space-6, 1.5rem);
  --ex-title: var(--text-2xl, clamp(1.1rem, 1vw + 0.9rem, 1.5rem));
  --ex-desc: var(--text-sm, clamp(0.9rem, 0.6vw + 0.6rem, 1rem));
  --ex-surface: var(--surface-2, #0b1220);
  --ex-focus: var(--accent, #2563eb);

  /* Depth */
  --ex-brd: color-mix(in srgb, #ffffff 22%, transparent);
  --ex-brd-dark: color-mix(in srgb, #0b1220 65%, transparent);
  --ex-shadow-1: 0 1px 2px rgba(2,6,23,.12);
  --ex-shadow-2: 0 10px 30px rgba(2,6,23,.22);

  /* Overlay strength */
  --ex-overlay-strong: 0.50;
  --ex-overlay-weak: 0.14;

  /* Motion */
  --kb-speed: 18s;
  --ease-std: cubic-bezier(.2,.6,.2,1);
  --ease-emph: cubic-bezier(.2,.8,.2,1);
}

@media (prefers-color-scheme: dark) {
  :root { --ex-brd: var(--ex-brd-dark); }
}

/* ------------------------------- Container -------------------------------- */
.explore {
  padding: clamp(0.5rem, 1.2vw, 1rem) var(--page-x, 0);
  margin: 0 auto;
  max-width: 1200px;
}

.header {
  margin: 0 0 0.5rem 0;
  padding: 0 var(--ex-pad);
}

.heading,
.sub { animation: fadeUp .7s var(--ease-emph) both; }
.heading {
  line-height: 1.2;
  font-weight: 800;
  font-size: clamp(1.25rem, 1.6vw + 0.8rem, 2rem);
  letter-spacing: -0.01em;
}
.sub {
  color: var(--muted, #6b7280);
  margin-top: 0.35rem;
  font-size: clamp(0.9rem, 0.6vw + 0.6rem, 1rem);
  animation-delay: .06s;
}

/* ----------------------------- Infinite marquee --------------------------- */
.marquee {
  position: relative;
  overflow: hidden;
  padding-inline: var(--ex-pad);

  /* subtle fade on edges */
  mask-image: linear-gradient(to right, transparent, #000 6%, #000 94%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, #000 6%, #000 94%, transparent);
}

.track {
  display: flex;
  gap: var(--ex-gap);
  width: max-content;
  padding-block: 0.25rem;
  animation: marquee var(--marquee-duration, 36s) linear infinite;
}

.marquee:hover .track { animation-play-state: paused; }

/* Reduced motion: stop auto-scroll, allow manual drag/scroll */
@media (prefers-reduced-motion: reduce) {
  .track { animation: none !important; }
  .marquee {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    scroll-padding-inline: var(--ex-pad);
  }
}

/* ---------------------------------- Card ---------------------------------- */
.card {
  position: relative;
  display: block;
  width: clamp(240px, 38vw, 360px);
  height: clamp(200px, 24vw, 280px);
  border-radius: var(--ex-card-radius);
  overflow: hidden;
  background: var(--ex-surface);
  box-shadow: var(--shadow-1);
  isolation: isolate;
  outline: none;
  flex: 0 0 auto; /* keep side-by-side */
  scroll-snap-align: start;
  transform: translateZ(0);
}

/* Background + overlay; real image from --bg-image */
.card::before {
  content: "";
  position: absolute; inset: 0; z-index: 0;
  border-radius: inherit;
  background-image:
    radial-gradient(120% 80% at 20% 80%, rgba(0,0,0,var(--ex-overlay-strong)), transparent 60%),
    linear-gradient(to top, rgba(0,0,0,calc(var(--ex-overlay-strong) - 0.12)),
                          rgba(0,0,0,var(--ex-overlay-weak)) 55%,
                          rgba(0,0,0,0) 85%),
    var(--bg-image);
  background-size: 160% 160%, 100% 100%, cover;
  background-position: 0% 0%, 0% 0%, center;
  background-repeat: no-repeat;
  filter: saturate(1.02) contrast(1.02) brightness(0.98);
  transform: scale(1.06) translate3d(-2%, -2%, 0);
  animation: kenburns var(--kb-speed) linear infinite alternate;
  will-change: transform;
}

/* Glass ring */
.card::after {
  content: "";
  position: absolute; inset: 0;
  border: 1px solid var(--border-1);
  border-radius: inherit;
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 1;
}

/* Content */
.content {
  position: absolute;
  inset-inline: clamp(0.75rem, 2vw, 1rem);
  inset-block-end: clamp(0.6rem, 1.6vw, 1rem);
  color: inherit;
  text-shadow: 0 2px 10px rgba(0,0,0,.45);
  z-index: 2;
}
.title {
  font-weight: 800;
  font-size: var(--ex-title);
  margin: 0;
  letter-spacing: .2px;
}
.desc {
  margin: 0.28rem 0 0 0;
  font-size: var(--ex-desc);
  line-height: 1.45;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Hover lift + shine */
@media (hover:hover) and (pointer:fine) {
  .card { cursor: pointer; transition: transform .28s var(--ease-emph), box-shadow .28s var(--ease-std); }
  .card:hover,
  .card:focus-visible { transform: translateY(-6px); box-shadow: var(--shadow-1); }

  .content::after {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    background: linear-gradient(110deg, transparent 40%, rgba(255,255,255,.35) 52%, transparent 64%);
    transform: translateX(-140%);
    transition: transform .8s var(--ease-emph);
    mix-blend-mode: screen;
    border-radius: inherit;
  }
  .card:hover .content::after,
  .card:focus-visible .content::after { transform: translateX(120%); }
}

.card:focus-visible {
  outline: 2px solid var(--ex-focus);
  outline-offset: 3px;
}

/* ------------------------------ Keyframes -------------------------------- */
@keyframes marquee {
  from { transform: translateX(0); }
  to   { transform: translateX(-50%); } /* one full set width (because we duplicated) */
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(14px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes kenburns {
  0%   { transform: scale(1.06) translate3d(-2%, -2%, 0); }
  100% { transform: scale(1.10) translate3d( 2%,  2%, 0); }
}


/* Enforced baseline for card-like elements */
.card, .box, .panel, .tile {
  background: var(--surface-0);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-1);
  padding: clamp(12px, 2.4vw, 20px);
}
