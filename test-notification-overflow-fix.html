<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification Overflow Fix Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            /* Test various overflow scenarios */
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            /* Test container overflow */
            overflow: hidden;
        }
        
        .test-section {
            margin-bottom: 32px;
            padding: 24px;
            background: #f7fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            /* Test section overflow */
            overflow: hidden;
        }
        
        .test-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            background: #4299e1;
            color: white;
            margin: 8px;
        }
        
        .test-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .overflow-test-container {
            /* Simulate problematic container that might clip notifications */
            position: relative;
            overflow: hidden;
            height: 200px;
            background: #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .status {
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            font-weight: 600;
        }
        
        .status--success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        
        .status--warning {
            background: #fefcbf;
            color: #744210;
            border: 1px solid #f6e05e;
        }
        
        /* Enhanced Notification System Styles with Overflow Fixes */
        .notification-container {
            position: fixed;
            z-index: 999999; /* Increased z-index */
            max-width: 420px;
            width: 100%;
            pointer-events: none;
            
            /* Ensure notifications are never cut off */
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            overflow-x: visible;
            
            /* Prevent any parent container from clipping notifications */
            clip: unset !important;
            clip-path: none !important;
            
            /* Ensure proper stacking context */
            isolation: isolate;
        }
        
        .notification-container--top-right {
            top: 20px;
            right: 20px;
            /* Ensure it doesn't go off-screen */
            max-width: min(420px, calc(100vw - 40px));
        }
        
        .notification-container--top-left {
            top: 20px;
            left: 20px;
            max-width: min(420px, calc(100vw - 40px));
        }
        
        .notification-container--bottom-right {
            bottom: 20px;
            right: 20px;
            max-width: min(420px, calc(100vw - 40px));
        }
        
        .notification-container--bottom-left {
            bottom: 20px;
            left: 20px;
            max-width: min(420px, calc(100vw - 40px));
        }
        
        .notification {
            position: relative;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%,
                rgba(255, 255, 255, 0.7) 100%
            );
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(10, 132, 255, 0.2);
            border-radius: 16px;
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.15),
                0 6px 20px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.06);
            cursor: pointer;
            pointer-events: auto;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: translateX(0) scale(1);
            opacity: 1;
            
            /* Ensure full coverage and prevent cutoff */
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
            
            /* Prevent any clipping */
            clip: unset !important;
            clip-path: none !important;
        }
        
        .notification:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 
                0 16px 48px rgba(0, 0, 0, 0.2),
                0 8px 24px rgba(0, 0, 0, 0.15),
                0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .notification--exiting {
            transform: translateX(100%) scale(0.9);
            opacity: 0;
            pointer-events: none;
        }
        
        .notification__content {
            flex: 1;
            min-width: 0;
            /* Ensure text wraps properly */
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .notification__title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin: 0 0 4px 0;
            line-height: 1.3;
        }
        
        .notification__message {
            font-size: 13px;
            color: #4a5568;
            margin: 0;
            line-height: 1.4;
        }
        
        .notification__dismiss {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            border: none;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.2s ease;
        }
        
        .notification:hover .notification__dismiss {
            opacity: 1;
        }
        
        .notification__dismiss:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        
        /* Mobile notification fixes */
        @media (max-width: 480px) {
            .notification-container {
                left: 8px !important;
                right: 8px !important;
                max-width: calc(100vw - 16px) !important;
                width: calc(100vw - 16px) !important;
                top: 10px !important;
            }
            
            .notification-container--bottom-right,
            .notification-container--bottom-left {
                bottom: 10px !important;
            }
            
            .notification {
                max-width: 100% !important;
                overflow-x: hidden !important;
                overflow-y: visible !important;
            }
            
            .notification * {
                word-break: break-word !important;
                overflow-wrap: break-word !important;
                hyphens: auto !important;
            }
        }
        
        /* Custom scrollbar for notification container */
        .notification-container::-webkit-scrollbar {
            width: 4px;
        }
        
        .notification-container::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .notification-container::-webkit-scrollbar-thumb {
            background: rgba(10, 132, 255, 0.3);
            border-radius: 2px;
        }
        
        .notification-container::-webkit-scrollbar-thumb:hover {
            background: rgba(10, 132, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Notification Overflow Fix Test</h1>
        <p>This test verifies that notifications are never cut off by viewport or container constraints.</p>
        
        <div class="status status--success">
            ‚úÖ Enhanced notification positioning with overflow fixes applied
        </div>
        
        <div class="test-section">
            <h3>üìç Position Tests</h3>
            <p>Test notifications in different positions to ensure they're never cut off:</p>
            <button class="test-btn" onclick="testTopRight()">Top Right</button>
            <button class="test-btn" onclick="testTopLeft()">Top Left</button>
            <button class="test-btn" onclick="testBottomRight()">Bottom Right</button>
            <button class="test-btn" onclick="testBottomLeft()">Bottom Left</button>
        </div>
        
        <div class="test-section">
            <h3>üì± Mobile & Responsive Tests</h3>
            <p>Test notifications on different screen sizes:</p>
            <button class="test-btn" onclick="testMobileNotification()">Mobile Notification</button>
            <button class="test-btn" onclick="testLongContent()">Long Content Test</button>
            <button class="test-btn" onclick="testMultipleNotifications()">Multiple Notifications</button>
        </div>
        
        <div class="test-section">
            <h3>üîÑ Overflow Scenario Tests</h3>
            <p>Test notifications in containers with overflow:hidden:</p>
            <div class="overflow-test-container">
                <p><strong>This container has overflow:hidden</strong></p>
                <p>Notifications should still be visible outside this container.</p>
                <button class="test-btn" onclick="testFromOverflowContainer()">Test from Overflow Container</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üßπ Utilities</h3>
            <button class="test-btn" onclick="clearAllNotifications()">Clear All</button>
            <button class="test-btn" onclick="testStressTest()">Stress Test (10 notifications)</button>
        </div>
        
        <div class="status status--warning">
            ‚ö†Ô∏è Instructions: Watch for notifications being cut off at screen edges or by container boundaries. All notifications should be fully visible.
        </div>
    </div>
    
    <!-- Notification containers for different positions -->
    <div id="notification-container-top-right" class="notification-container notification-container--top-right"></div>
    <div id="notification-container-top-left" class="notification-container notification-container--top-left"></div>
    <div id="notification-container-bottom-right" class="notification-container notification-container--bottom-right"></div>
    <div id="notification-container-bottom-left" class="notification-container notification-container--bottom-left"></div>
    
    <script>
        let notificationId = 1;
        
        function createNotification(config) {
            const position = config.position || 'top-right';
            const container = document.getElementById(`notification-container-${position}`);
            const id = notificationId++;
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.dataset.id = id;
            
            notification.innerHTML = `
                <div class="notification__content">
                    <div class="notification__title">${config.title}</div>
                    <div class="notification__message">${config.message}</div>
                </div>
                <button class="notification__dismiss" onclick="dismissNotification(${id}, '${position}', event)">‚úï</button>
            `;
            
            container.appendChild(notification);
            console.log(`Created notification #${id} at position ${position}`);
            
            // Auto-dismiss after timeout
            const timeout = config.timeout || 8000;
            setTimeout(() => {
                dismissNotification(id, position);
            }, timeout);
            
            return id;
        }
        
        function dismissNotification(id, position, event) {
            if (event) {
                event.stopPropagation();
            }
            
            const container = document.getElementById(`notification-container-${position}`);
            const notification = container.querySelector(`[data-id="${id}"]`);
            if (notification) {
                notification.classList.add('notification--exiting');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
                console.log(`Dismissed notification #${id} from ${position}`);
            }
        }
        
        function clearAllNotifications() {
            const positions = ['top-right', 'top-left', 'bottom-right', 'bottom-left'];
            positions.forEach(position => {
                const container = document.getElementById(`notification-container-${position}`);
                const notifications = container.querySelectorAll('.notification');
                notifications.forEach(notification => {
                    notification.classList.add('notification--exiting');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                });
            });
            console.log('All notifications cleared');
        }
        
        // Test Functions
        function testTopRight() {
            createNotification({
                position: 'top-right',
                title: 'Top Right Position Test',
                message: 'This notification should be fully visible in the top-right corner without being cut off by the viewport edge.'
            });
        }
        
        function testTopLeft() {
            createNotification({
                position: 'top-left',
                title: 'Top Left Position Test',
                message: 'This notification should be fully visible in the top-left corner without being cut off by the viewport edge.'
            });
        }
        
        function testBottomRight() {
            createNotification({
                position: 'bottom-right',
                title: 'Bottom Right Position Test',
                message: 'This notification should be fully visible in the bottom-right corner without being cut off by the viewport edge.'
            });
        }
        
        function testBottomLeft() {
            createNotification({
                position: 'bottom-left',
                title: 'Bottom Left Position Test',
                message: 'This notification should be fully visible in the bottom-left corner without being cut off by the viewport edge.'
            });
        }
        
        function testMobileNotification() {
            createNotification({
                position: 'top-right',
                title: 'Mobile Responsive Test',
                message: 'On mobile devices, this notification should automatically adjust to fit the screen width with proper margins and never extend beyond the viewport.'
            });
        }
        
        function testLongContent() {
            createNotification({
                position: 'top-right',
                title: 'Long Content Overflow Test - This is a Very Long Title That Should Wrap Properly',
                message: 'This notification contains a very long message to test text wrapping and ensure that long content does not cause the notification to be cut off or extend beyond the viewport boundaries. The text should wrap naturally and the notification should remain fully visible. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.'
            });
        }
        
        function testMultipleNotifications() {
            for (let i = 1; i <= 5; i++) {
                setTimeout(() => {
                    createNotification({
                        position: 'top-right',
                        title: `Notification Stack Test #${i}`,
                        message: `This is notification ${i} of 5. All notifications should be visible and properly stacked without being cut off.`,
                        timeout: 12000
                    });
                }, i * 200);
            }
        }
        
        function testFromOverflowContainer() {
            createNotification({
                position: 'top-right',
                title: 'Overflow Container Test',
                message: 'This notification was triggered from inside a container with overflow:hidden. It should still be fully visible outside the container boundaries.'
            });
        }
        
        function testStressTest() {
            const positions = ['top-right', 'top-left', 'bottom-right', 'bottom-left'];
            for (let i = 1; i <= 10; i++) {
                setTimeout(() => {
                    const position = positions[i % positions.length];
                    createNotification({
                        position: position,
                        title: `Stress Test #${i}`,
                        message: `Testing notification ${i} at ${position} position. All notifications should remain visible.`,
                        timeout: 15000
                    });
                }, i * 300);
            }
        }
        
        // Initialize
        console.log('Notification overflow fix test initialized');
        console.log('Test different positions and scenarios to verify notifications are never cut off');
        
        // Add resize listener to test responsive behavior
        window.addEventListener('resize', () => {
            console.log(`Window resized to ${window.innerWidth}x${window.innerHeight}`);
        });
    </script>
</body>
</html>